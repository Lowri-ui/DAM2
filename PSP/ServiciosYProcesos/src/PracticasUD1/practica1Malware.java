package PracticasUD1;

import java.io.IOException;

//Implemente un programa en Java utilizando las clases Process, ProcessBuilder,
//Runtime. El programa debe abrir veces tres procesos en un sistema operativo
//Windows:
//        • Notepad
//• C:\Program Files\Mozilla Firefox\firefox.exe
//• C:\Windows\explorer.exe
//La forma de actuar de este malware una vez sea ejecutado será la siguiente:
//        • Ejecutar los procesos Notepad y el Firefox, una vez abiertos el malware detiene
//su ejecución un segundo y a continuación abrirá el explorador de archivos de
//Windows.
//• Seguidamente, cerrará el Notepad y Firefox manteniendo el explorador.
//• Repetirá los pasos anteriores en bucle en veinte ocasiones.
//• Esperará 5 segundos.
//• Apagará o reiniciará el sistema (o muestra un mensaje por pantalla en su
//        defecto)

//NOTAS
//Utilice la clase ProcessBuilder para iniciar los procesos Notepad y Firefox
//        Utilice la clase Runtime para iniciar el explorador de archivos y ejecutar el comando
//        para apagar la máquina.
//        Referencias a la línea de comando de Windows shutdown
//¿Cómo detener el hilo principal del malware para que se detenga?
//        Thread.sleep(1000);
//        Trate las excepciones debidamente, muestre por consola que proceso ha sido
//        ejecutado y cuando termina su ejecución.


public class practica1Malware {
    static void main(String[] args) {
        for (int i = 0; i < 2; i++) {
            try {
                //Lanzamos los procesos de notepad, firefox y windows explorer
                Process p1 = new ProcessBuilder("notepad").start();
                Process p2 = new ProcessBuilder("C:\\Program Files\\Mozilla Firefox\\firefox.exe").start();
                Process p3 = Runtime.getRuntime().exec("C:\\Windows\\explorer.exe");
                System.out.println("Notepad, Firefox y Windows Explorer abierto");

                //Queremos mostrar un mensaje a través del cmd que indique que el ordenador va a apagarse
                //En vez de ejecutar el comando shutdown (para no apagarlo de verdad)
                Process p4 = Runtime.getRuntime().exec(new String[]{"cmd", "/c", "start", "cmd", "/k", "echo El ordenador se apagará"});

            } catch (IOException e) {
                throw new RuntimeException(e);
            }
        }
    }
}
